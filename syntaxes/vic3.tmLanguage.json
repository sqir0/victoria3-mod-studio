{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "Victoria 3",
  "scopeName": "source.vic3",
  "patterns": [
    { "include": "#comments" },
    { "include": "#strings" },
    { "include": "#numbers" },
    { "include": "#booleans" },
    { "include": "#variables" },
    { "include": "#operators" },
    { "include": "#brackets" },
    { "include": "#triggers" },
    { "include": "#effects" },
    { "include": "#modifiers" },
    { "include": "#scopes" },
    { "include": "#gui" },
    { "include": "#structure" },
    { "include": "#keywords" }
  ],
  "repository": {
    "comments": {
      "name": "comment.line.number-sign.vic3",
      "match": "#.*$"
    },
    "strings": {
      "name": "string.quoted.double.vic3",
      "begin": "\"",
      "end": "\"",
      "patterns": [
        {
          "name": "constant.character.escape.vic3",
          "match": "\\\\."
        },
        {
          "name": "variable.other.localization.vic3",
          "match": "\\$[a-zA-Z_][a-zA-Z0-9_]*\\$"
        },
        {
          "name": "entity.name.tag.concept.vic3",
          "match": "\\[([a-zA-Z_][a-zA-Z0-9_.]*(?:\\([^)]*\\))?)\\]"
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "name": "constant.numeric.float.vic3",
          "match": "-?\\d+\\.\\d+"
        },
        {
          "name": "constant.numeric.integer.vic3",
          "match": "-?\\d+"
        }
      ]
    },
    "booleans": {
      "name": "constant.language.boolean.vic3",
      "match": "\\b(yes|no|true|false)\\b"
    },
    "variables": {
      "patterns": [
        {
          "name": "variable.other.constant.vic3",
          "match": "@[a-zA-Z_][a-zA-Z0-9_]*"
        },
        {
          "name": "variable.other.scope.vic3",
          "match": "\\b(root|this|prev|from|owner|controller|capital|scope)\\b"
        },
        {
          "name": "variable.other.saved.vic3",
          "match": "\\bvar:[a-zA-Z_][a-zA-Z0-9_]*\\b"
        },
        {
          "name": "variable.other.scripted.vic3",
          "match": "\\bscope:[a-zA-Z_][a-zA-Z0-9_]*\\b"
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.comparison.vic3",
          "match": "(>=|<=|!=|==|>|<)"
        },
        {
          "name": "keyword.operator.assignment.vic3",
          "match": "="
        }
      ]
    },
    "brackets": {
      "patterns": [
        {
          "name": "punctuation.definition.block.begin.vic3",
          "match": "\\{"
        },
        {
          "name": "punctuation.definition.block.end.vic3",
          "match": "\\}"
        }
      ]
    },
    "triggers": {
      "name": "support.function.trigger.vic3",
      "match": "\\b(is_[a-z_]+|has_[a-z_]+|can_[a-z_]+|any_[a-z_]+|all_[a-z_]+|count_[a-z_]+|num_[a-z_]+|NOT|AND|OR|NOR|NAND|IF|else|else_if|limit|trigger_if|trigger_else|trigger_else_if|always|exists|date|game_date)\\b"
    },
    "effects": {
      "name": "entity.name.function.effect.vic3",
      "match": "\\b(add_[a-z_]+|set_[a-z_]+|remove_[a-z_]+|create_[a-z_]+|change_[a-z_]+|trigger_event|random|random_list|every_[a-z_]+|ordered_[a-z_]+|random_[a-z_]+|save_scope_as|save_temporary_scope_as|hidden_effect|show_as_tooltip|custom_tooltip|break|while|switch)\\b"
    },
    "modifiers": {
      "name": "variable.other.modifier.vic3",
      "match": "\\b([a-z_]+_(mult|add|factor)|modifier|country_modifier|state_modifier|character_modifier|building_modifier|goods_modifier|interest_group_modifier|institution_modifier|technology_modifier|law_modifier|production_method_modifier)\\b"
    },
    "scopes": {
      "name": "storage.type.scope.vic3",
      "match": "\\b(country|state|pop|building|character|interest_group|institution|market|market_goods|diplomatic_play|war|front|battle|hq|military_formation|commander|admiral|general|political_movement|journal_entry|objective|decree|law|party|culture|religion|state_region|strategic_region|theater|province|company)\\b"
    },
    "gui": {
      "name": "support.class.gui.vic3",
      "match": "\\b(window|widget|button|icon|text_single|text_multi|textbox|editbox|scrollarea|scrollbar|scrollbar_vertical|scrollbar_horizontal|scrollwidget|flowcontainer|fixedgridbox|dynamicgridbox|overlappingitembox|container|hbox|vbox|margin_widget|dropdown|checkbutton|progressbar|pieslice|animation|modify_texture|background|datacontext|datamodel|item|state|using|blockoverride|block|template|types|type|parentanchor|widgetanchor|position|size|margin|spacing|visible|enabled|alpha|scale|rotation|tooltip|tooltipwidget|onclick|onrightclick|ondoubleclick|onmousehierarchyenter|onmousehierarchyleave|layoutpolicy_horizontal|layoutpolicy_vertical|resizeparent|ignoreinvisible|minimumsize|maximumsize|direction|allow_outside|restrictparent_min|alwaystransparent|filter_mouse|scissor|layer|name|text|texture|frame|framesize|spriteType|spriteborder|effectname|tintcolor|color|font|fontsize|align|elide|autoresize|multiline|max_width|min_characters|format|raw_text|raw_tooltip|shortcut|default_format|value|min|max|clicksound|oversound|axis|offset)\\b"
    },
    "structure": {
      "name": "keyword.control.structure.vic3",
      "match": "\\b(namespace|type|name|desc|title|icon|video|sound|effect|flavor|immediate|option|on_created|on_complete|on_monthly|on_yearly|on_weekly|on_start|on_end|on_fail|on_success|on_invalid|on_timeout|ai_chance|weight|factor|base|compare|target|days|months|years|id|trigger|possible|allow|is_shown|when_taken|complete|fail|timeout|invalidation|can_have|should_have|category|group|texture|modifiers|on_add|on_remove|values|default)\\b"
    },
    "keywords": {
      "patterns": [
        {
          "name": "keyword.other.namespace.vic3",
          "match": "^[a-zA-Z_][a-zA-Z0-9_]*(?=\\s*\\.\\s*\\d+)"
        },
        {
          "name": "entity.name.type.event.vic3",
          "match": "[a-zA-Z_][a-zA-Z0-9_]*\\.\\d+"
        }
      ]
    }
  }
}